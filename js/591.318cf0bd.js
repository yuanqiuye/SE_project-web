"use strict";(self["webpackChunkcr"]=self["webpackChunkcr"]||[]).push([[591],{5591:function(t,o,e){async function n(){const t=localStorage.getItem("loggedInAccount");try{const o=await fetch("https://qiuye.mooo.com/api/app/getUserPeriodData",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userAccount:t})});if(!o.ok)throw new Error("请求失败");const e=await o.json(),n=Object.values(e),r=await Promise.all(n.map((async t=>{var o=t.period.startPeriod,e=t.period.endPeriod;const n=new Date(o),r=new Date(e);var s=0;s=55==r.getMinutes()?9:r.getHours()-8;const a={day:n.getDay(),startPeriod:n.getHours()-7,endPeriod:s};return console.log(r.getMinutes()),t.period=a,t})));return console.log("getUserPeriodData",r),r}catch(o){throw console.error(o),o}}async function r(){try{const t=await fetch("https://qiuye.mooo.com/api/app/getAllUserPeriodData",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("请求失败");const o=await t.json(),e=Object.values(o),n=e.map((t=>{var o=t.period.startPeriod,e=t.period.endPeriod;const n=new Date(o),r=new Date(e);var s=0;s=55==r.getMinutes()?9:r.getHours()-8;const a={day:n.getDay(),startPeriod:n.getHours()-7,endPeriod:s};return console.log(r.getMinutes()),t.period=a,t}));return console.log(n),n}catch(t){throw console.error(t),t}}async function s(t){const o=await fetch("https://qiuye.mooo.com/api/app/getEnablePeriodData",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({classroomID:t})});if(!o.ok)throw new Error("请求失败");const e=await o.json();return e}async function a(t,o){try{const e="https://qiuye.mooo.com/api/app/setEnablePeriod",n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({classroomID:t,enablePeriod:o})});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return n.json()}catch(e){throw console.error("Error during setEnablePeriod:",e),e}}async function i(){try{const t=await fetch("https://qiuye.mooo.com/api/app/getAllEnablePeriodData",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("请求失败");const o=await t.json();return console.log(o),o}catch(t){throw console.error(t),t}}function c(t,o,e){var n=new Date;n.setHours(0,0,0,0);const r=n.getDay(),s=0===r?6:r-1,a=new Date(n);a.setDate(n.getDate()-s),n=new Date(n),6==r||7==r?n.setDate(a.getDate()+t+6):n.setDate(a.getDate()+t-1);const i=new Date(n);1===o?i.setHours(8,20,0,0):2===o?i.setHours(9,20,0,0):3===o?i.setHours(10,20,0,0):4===o?i.setHours(11,15,0,0):5===o?i.setHours(12,10,0,0):6===o?i.setHours(13,10,0,0):7===o?i.setHours(14,10,0,0):8===o?i.setHours(15,10,0,0):9===o&&i.setHours(16,5,0,0);const c=new Date(n);return 1===c?c.setHours(9,10,0,0):2===e?c.setHours(10,10,0,0):3===e?c.setHours(11,10,0,0):4===e?c.setHours(12,5,0,0):5===e?c.setHours(13,0,0,0):6===e?c.setHours(14,0,0,0):7===e?c.setHours(15,0,0,0):8===e?c.setHours(16,0,0,0):9===e&&c.setHours(16,55,0,0),{startPeriod:i.toJSON(),endPeriod:c.toJSON()}}async function u(t,o){const e=c(o.day,o.startPeriod,o.endPeriod),n="https://qiuye.mooo.com/api/app/sendApply",r=localStorage.getItem("loggedInAccount");o=e,console.log(o);try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({classroomID:t,selectedPeriod:o,userAccount:r})});if(!e.ok)throw new Error("Network response was not ok");const s=await e.json();if(console.log(s.code),"200"==s.code)return 200;if("400"==s.code)return 400}catch(s){throw console.error("There has been a problem with your fetch operation:",s),s}}async function p(t){try{const o=await fetch("https://qiuye.mooo.com/api/app/cancelApply",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pid:t})});if(!o.ok)throw new Error(`取消申请失败，状态码：${o.status}`);const e=await o.json();return console.log("取消申请成功",e),200}catch(o){return console.error("取消申请时发生错误",o.message),400}}async function d(t){try{const o=await fetch("https://qiuye.mooo.com/api/app/deletePeriodData",{method:"POST",headers:{"Content-Type":"application/json",Origin:"Origin"},credentials:"include",body:JSON.stringify({pid:t})});if(!o.ok)throw new Error(`取消申请失败，状态码：${o.status}`);const e=await o.json();return console.log("刪除申請成功",e),200}catch(o){return console.error("刪除申請时发生错误",o.message),400}}async function l(t){try{const o=await fetch("https://qiuye.mooo.com/api/app/LendKey",{method:"POST",headers:{"Content-Type":"application/json",Origin:"Origin"},credentials:"include",body:JSON.stringify({pid:t})});if(!o.ok)throw new Error(`借出鑰匙失败，状态码：${o.status}`);const e=await o.json();return console.log("借出鑰匙成功",e),200}catch(o){return console.error("借出鑰匙时发生错误",o.message),400}}async function h(t){try{const o=await fetch("https://qiuye.mooo.com/api/app/ReceiveKey",{method:"POST",headers:{"Content-Type":"application/json",Origin:"Origin"},credentials:"include",body:JSON.stringify({pid:t})});if(!o.ok)throw new Error(`歸還鑰匙失败，状态码：${o.status}`);const e=await o.json();return console.log("歸還鑰匙成功",e),200}catch(o){return console.error("歸還鑰匙发生错误",o.message),400}}async function y(t){try{const o=await fetch("https://qiuye.mooo.com/api/app/acceptRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pid:t}),credentials:"include"});if(!o.ok)throw new Error(`接受時段申請失败，状态码：${o.status}`);const e=await o.json();return console.log("接受時段申請成功",e),200}catch(o){return console.error("接受時段申請发生错误",o.message),400}}async function w(t){try{const o=await fetch("https://qiuye.mooo.com/api/app/rejectRequest",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pid:t})});if(!o.ok)throw new Error(`拒絕時段申請失败，状态码：${o.status}`);const e=await o.json();return console.log("拒絕時段申請成功",e),200}catch(o){return console.error("拒絕時段申請发生错误",o.message),400}}async function f(){try{const t=await fetch("https://qiuye.mooo.com/api/app/getAllUserPoint",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();return o}catch(t){throw console.error("There has been a problem with your fetch operation:",t),t}}async function g(t){try{const o=await fetch("https://qiuye.mooo.com/api/app/getUserPoint",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({account:t})});if(!o.ok)throw new Error("Network response was not ok");const e=await o.json();return e}catch(o){throw console.error("There has been a problem with your fetch operation:",o),o}}async function m(t,o){try{const e=await fetch("https://qiuye.mooo.com/api/app/setUserPoint",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({account:t,point:o})});if(!e.ok)throw new Error(`请求失败，状态码: ${e.status}`);return 200}catch(e){throw console.error("设置用户计分数据失败",e.message||e),e}}async function P(t,o){try{const e=await fetch("https://qiuye.mooo.com/api/app/setUserBanState",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({account:t,state:o})});if(!e.ok)throw new Error("请求失败");return e.status}catch(e){throw console.error("设置用户计分数据失败",e),e}}e.d(o,{Bs:function(){return p},ED:function(){return y},QN:function(){return w},Uh:function(){return u},bK:function(){return a},c0:function(){return i},dN:function(){return r},iG:function(){return n},iU:function(){return m},jo:function(){return h},pe:function(){return l},rp:function(){return g},tU:function(){return d},tX:function(){return f},vx:function(){return s},yj:function(){return P}})}}]);
//# sourceMappingURL=591.318cf0bd.js.map