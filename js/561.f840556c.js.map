{"version":3,"file":"js/561.f840556c.js","mappings":"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","sources":["webpack://cr/./src/components/admin/UserInfoPage.vue","webpack://cr/./src/components/admin/other/UserInfoTable.vue","webpack://cr/./src/components/admin/other/UserInfoTable.vue?69b4","webpack://cr/./src/components/admin/UserInfoPage.vue?0bf8"],"sourcesContent":["<template>\n  <user-info-table :insert-data=\"insertData\"/>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport userInfoTable from \"@/components/admin/other/UserInfoTable.vue\";\nimport { getAllUserPoint } from \"@/api/app\";\n\nexport default {\n  components: {\n    \"user-info-table\": userInfoTable\n  },\n  setup() {\n    const insertData = ref([]);\n\n    onMounted(async () => {\n      try {\n        insertData.value = await getAllUserPoint();\n      } catch (error) {\n        console.error('获取用户积分数据时发生错误:', error);\n      }\n    });\n\n    return { insertData };\n  }\n}\n</script>\n","<template>\n  <div class=\"ts-box borderShadow\">\n    <table class=\"main-table ts-table is-celled\">\n      <tbody>\n        <tr>\n          <td class=\"main-table-fliter-account\">\n            <div class=\"ts-input is-start-icon is-solid\">\n              <span class=\"ts-icon is-magnifying-glass-icon\"></span>\n              <input type=\"text\" placeholder=\"學號\" v-model=\"fliter.account\">\n            </div>\n          </td>\n          <td>\n            <div class=\"ts-select is-solid\">\n              <select v-model=\"fliter.role\">\n                <option value=\"0\">學生</option>\n                <option value=\"1\">教師</option>\n                <option value=\"2\">管理員</option>\n              </select>\n            </div>\n          </td>\n          <td></td>\n          <td>\n            <div class=\"ts-select is-solid\">\n              <select v-model=\"fliter.banned\">\n                <option value=\"0\">正常</option>\n                <option value=\"1\">被封鎖</option>\n              </select>\n            </div>\n          </td>\n          <td>\n            <span class=\"ts-icon is-caret-left-icon main-table-resetButton iconButton\" title=\"重置篩選器\" @click=\"resetFliter\">\n              <span class=\"ts-icon is-rotate-right-icon\"></span>\n            </span>\n          </td>\n        </tr>\n        <tr>\n          <td>使用者</td>\n          <td>身分</td>\n          <td>違規點數</td>\n          <td>狀態</td>\n          <td><span class=\"ts-icon is-gears-icon\"></span></td>\n        </tr>\n        <tr v-for=\"rowData in insertData\" :key=\"rowData.account\" v-show=\"isShow(rowData)\">\n          <td>{{ rowData.account }}</td>\n          <td>{{ getRoleText[rowData.role] }}</td>\n          <td>\n            <span\n              class=\"ts-icon is-minus-icon iconButton\"\n              v-show=\"editingPoint.account == rowData.account\"\n              @click=\"minusPointButton\"\n            ></span>\n            <span class=\"rowData-point\">\n              {{ (editingPoint.account == rowData.account) ? editingPoint.point : rowData.point }}\n            </span>\n            <span\n              class=\"ts-icon is-plus-icon iconButton\"\n              v-show=\"editingPoint.account == rowData.account\"\n              @click=\"plusPointButton\"\n            ></span>\n            <span\n              class=\"ts-icon is-check-icon iconButton\"\n              title=\"確定修改\"\n              v-show=\"editingPoint.account == rowData.account\"\n              @click=\"confirmPointButton\"\n            ></span>\n            <span\n              class=\"ts-icon is-pen-icon iconButton\"\n              title=\"修改違規點數\"\n              v-show=\"!(editingPoint.account == rowData.account)\"\n              @click=\"editPointButton(rowData)\"\n            ></span>\n          </td>\n          <td>{{ getStateText[rowData.banned] }}</td>\n          <td>\n            <span\n              class=\"ts-icon is-ban-icon iconButton-danger\"\n              title=\"封鎖\"\n              v-if=\"rowData.banned == 0\"\n              @click=\"banButton(rowData.account)\"\n            ></span>\n            <span\n              class=\"ts-icon is-unlock-icon iconButton\"\n              title=\"解除封鎖\"\n              v-if=\"rowData.banned == 1\"\n              @click=\"unbanButton(rowData.account)\"\n            ></span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\n  import { setUserPoint, setUserBanState } from \"@/api/app\";\n\n  export default{\n    props: {\n      insertData: { default: [] } // 要插入表格的數筆資料\n    },\n    data(){\n      return {\n        getRoleText: [ \"學生\", \"教師\", \"管理員\"],\n        getStateText: [ \"正常\", \"被封鎖\" ],\n        fliter: null, // resetFliter() will init\n        editingPoint: { account: null, point: null }\n      }\n    },\n    created(){\n      this.resetFliter();\n    },\n    methods: {\n      resetFliter(){ // 重置篩選列\n        this.fliter = { account: \"\", role: null, banned: null };\n      },\n      isShow(rowData){ // 篩選器判斷哪一列要顯示\n        let show = true;\n        if (!rowData.account.includes(this.fliter.account)) show = false; // 學號篩選\n        if (this.fliter.role != null && rowData.role != this.fliter.role) show = false; // 身分組篩選\n        if (this.fliter.banned != null && rowData.banned != this.fliter.banned) show = false; // 權限篩選\n        return show;\n      },\n      \n      editPointButton(rowData){ // 點擊編輯點數按鈕\n        this.editingPoint.account = rowData.account;\n        this.editingPoint.point = rowData.point;\n      },\n      minusPointButton(){ // 減少點數\n        if (this.editingPoint.point > 0) this.editingPoint.point--;\n      },\n      plusPointButton(){ // 增加點數\n        if (this.editingPoint.point < 10) this.editingPoint.point++;\n      },\n      async confirmPointButton(){ // 確認修改按鈕\n        const result = window.confirm(`是否要修改違規點數 ?`); // 彈出式確認框\n        if (result){\n          const returnCode = await setUserPoint(this.editingPoint.account, this.editingPoint.point); // 執行指定的 api function\n          switch (returnCode){\n            case 200: // api操作執行成功\n              alert(`修改成功 !`);\n              break;\n            case 400: // api操作執行失敗\n              alert(`修改失敗 !`);\n              break;\n            default: // 未知錯誤\n              alert(\"修改成功 !\");\n              break;\n          }\n          window.location.reload(); // force reload\n        }\n        this.editingPoint.account = null; // 重置\n      },\n      \n      async runConfirmDialog(questionText, resultText, f_ban, account, state){ // 自定義彈出式確認框\n        const result = window.confirm(`${questionText} ?`); // 彈出式確認框\n        if (!result) return; // 按下取消就不執行 api\n        \n        const returnCode = await f_ban(account, state); // 執行指定的 api function\n        switch (returnCode){\n          case 200: // api操作執行成功\n            alert(`${resultText}成功 !`);\n            break;\n          case 400: // api操作執行失敗\n            alert(`${resultText}失敗 !`);\n            break;\n          default: // 未知錯誤\n            alert(`${resultText}成功 !`);\n            break;\n        }\n        window.location.reload(); // force reload\n      },\n      banButton(account){ // 封鎖按鈕\n        this.runConfirmDialog(\"是否要封鎖此人\", \"封鎖\", setUserBanState, account, 1);\n      },\n      unbanButton(account){ // 解除封鎖按鈕\n        this.runConfirmDialog(\"是否要解除封鎖\", \"解除封鎖\", setUserBanState, account, 0);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .iconButton{\n    padding: 8px;\n    border-radius: 4px;\n    color: #000;\n  }\n  .iconButton:hover{\n    background-color: #cff;\n  }\n  .iconButton-danger{\n    padding: 8px;\n    border-radius: 4px;\n    color: #f00;\n  }\n  .iconButton-danger:hover{\n    background-color: #fdd;\n  }\n  .main-table td{\n    text-align: center; white-space: nowrap;\n    overflow-x: hidden;\n  }\n  .main-table > tbody > tr:nth-child(1) > td{\n    padding: 6px 8px;\n  }\n  .main-table > tbody > tr:nth-child(2) > td{\n    background-color: #e4e4e4;\n    font-weight: bold; user-select: none;\n  }\n  .main-table-resetButton > span.ts-icon{\n    margin-left: 4px;\n  }\n  .main-table-fliter-account > div{\n    width: 130px;\n  }\n  .main-table-fliter-id > div{\n    width: 120px;\n  }\n  .main-table-fliter-classroom > div:not(:first-child){\n    margin-left: 6px;\n  }\n  .main-table-fliter-period > div:not(:first-child){\n    margin-left: 6px;\n  }\n  .main-table-fliter-period > span{\n    margin-left: 6px;\n  }\n  .rowData-point{\n    margin: 0 4px;\n    user-select: none;\n  }\n</style>","import { render } from \"./UserInfoTable.vue?vue&type=template&id=7070bba2&scoped=true\"\nimport script from \"./UserInfoTable.vue?vue&type=script&lang=js\"\nexport * from \"./UserInfoTable.vue?vue&type=script&lang=js\"\n\nimport \"./UserInfoTable.vue?vue&type=style&index=0&id=7070bba2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7070bba2\"]])\n\nexport default __exports__","import { render } from \"./UserInfoPage.vue?vue&type=template&id=a0487bc4\"\nimport script from \"./UserInfoPage.vue?vue&type=script&lang=js\"\nexport * from \"./UserInfoPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_user_info_table","$setup","insertData","class","_createElementVNode","value","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_13","_hoisted_14","_hoisted_16","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","type","placeholder","$data","fliter","account","$event","_hoisted_6","role","_hoisted_11","_hoisted_12","banned","title","onClick","_cache","args","$options","resetFliter","_hoisted_18","_Fragment","_renderList","$props","rowData","key","_toDisplayString","getRoleText","minusPointButton","editingPoint","_hoisted_19","point","plusPointButton","confirmPointButton","editPointButton","getStateText","banButton","unbanButton","isShow","props","default","data","created","this","methods","show","includes","result","window","confirm","returnCode","setUserPoint","alert","location","reload","runConfirmDialog","questionText","resultText","f_ban","state","setUserBanState","__exports__","components","userInfoTable","setup","ref","onMounted","async","getAllUserPoint","error","console","render"],"sourceRoot":""}