{"version":3,"file":"js/470.f4ef3da5.js","mappings":"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","sources":["webpack://cr/./src/api/app.js","webpack://cr/./src/api/save.js","webpack://cr/./src/assets/import.js","webpack://cr/./src/components/user/other/SaveButton.vue","webpack://cr/./src/components/user/other/SaveButton.vue?47f4"],"sourcesContent":["// import enablePeriod from \"@/api/enable-period.json\"; // 後端完成後可刪\n// import user from \"@/api/user-data.json\"; // 後端完成後可刪\n\n//加async、useraccount\nexport async function getUserPeriodData() { // 獲取user的借用資料\n    // 可修改區 start\n\n    const account = localStorage.getItem('loggedInAccount');\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getUserPeriodData', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ userAccount: account }),\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        const data = await response.json();\n        // 将对象的值转换为数组\n        const dataArray = Object.values(data);\n        //console.log(\"dataArray\",data);\n        const updatedData = dataArray.map((item) => {\n            var startTotalMinutes = getMinutesFromTimeString(item.period.startPeriod);\n            var endTotalMinutes = getMinutesFromTimeString(item.period.endPeriod);\n\n            if (startTotalMinutes <= 480) startTotalMinutes = 481;\n\n            const n1 = Math.ceil((startTotalMinutes - 8 * 60) / 60);\n            const n2 = Math.ceil((endTotalMinutes - 8 * 60) / 60);\n            const day = new Date(item.period.startPeriod); //修正\n            const n3 = day.getDay();\n\n            //console.log(n1);\n            //console.log(n2);\n            // 創建新的 period 物件\n            const newPeriod = {\n                \"day\": n3, // 星期幾，這裡是示範值，根據實際情況調整\n                \"startPeriod\": n1, // 開始時間\n                \"endPeriod\": n2 // 結束時間\n            };\n\n            // 將新的 period 物件替換原來的 period\n            item.period = newPeriod;\n\n            return item;\n        });\n\n        console.log(\"getUserPeriodData\", updatedData);\n\n        // 回傳處理後的 JSON 物件\n        return updatedData;\n        \n\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n\n    // return user.periodData;\n    // 可修改區 end\n}\n\n\n\nexport async function getAllUserPeriodData() {\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getAllUserPeriodData', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        const data = await response.json();\n        // 将对象的值转换为数组\n        const dataArray = Object.values(data);\n        //console.log(\"dataArray\",data);\n        const updatedData = dataArray.map((item) => {\n            var startTotalMinutes = getMinutesFromTimeString(item.period.startPeriod);\n            var endTotalMinutes = getMinutesFromTimeString(item.period.endPeriod);\n\n            if (startTotalMinutes <= 480) startTotalMinutes = 481;\n\n            const n1 = Math.ceil((startTotalMinutes - 8 * 60) / 60);\n            const n2 = Math.ceil((endTotalMinutes - 8 * 60) / 60);\n            const day = new Date(item.period.startPeriod); //修正\n            const n3 = day.getDay();\n\n            //console.log(n1);\n            //console.log(n2);\n            // 創建新的 period 物件\n            const newPeriod = {\n                \"day\": n3, // 星期幾，這裡是示範值，根據實際情況調整\n                \"startPeriod\": n1, // 開始時間\n                \"endPeriod\": n2 // 結束時間\n            };\n\n            // 將新的 period 物件替換原來的 period\n            item.period = newPeriod;\n\n            return item;\n        });\n\n        console.log(updatedData);\n\n        // 回傳處理後的 JSON 物件\n        return updatedData;\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\n// 將這兩個函數的聲明移到頂部\nfunction getMinutesFromTimeString(timeString) {\n    const date = new Date(timeString);\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n    return hours * 60 + minutes;\n}\n\n\nexport async function getEnablePeriodData(classroomID) {\n    const response = await fetch('https://qiuye.mooo.com/api/app/getEnablePeriodData', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n\n        },\n        credentials: 'include',\n        body: JSON.stringify({ classroomID }),\n    });\n\n    if (!response.ok) {\n        throw new Error('请求失败');\n    }\n\n    const data = await response.json();\n    return data;\n}\n\n\nexport async function setEnablePeriod(classroomID, enablePeriod) {\n    try {\n        const apiUrl = `https://qiuye.mooo.com/api/app/setEnablePeriod`; // 根据实际后端 API 地址修改\n\n        const response = await fetch(apiUrl, {\n            method: 'POST', // 根据你的 API 需求，可能是 'POST' 或 'PUT'\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ classroomID, enablePeriod }),\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n\n        // 返回响应的数据，如果有的话\n        return response.json();\n    } catch (error) {\n        console.error('Error during setEnablePeriod:', error);\n        throw error;\n    }\n}\n\n\n\n//加async\nexport async function getAllEnablePeriodData() { // 跟後端拿全部教室的可借時段\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getAllEnablePeriodData', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        const data = await response.json();\n        console.log(data)\n        return data;\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n/*\n  return:\n    請參照 enable-period.json\n*/\nfunction convertToTimeString(day, startPeriod, endPeriod) {\n    const baseDate = new Date();\n  \n    // 计算给定 day、startPeriod 和 endPeriod 对应的时间\n    const startDateTime = new Date(baseDate);\n    startDateTime.setDate(baseDate.getDate() + day - 1);\n    if (startPeriod === 1) startDateTime.setHours(9, 0, 0, 0);\n    else if (startPeriod === 2) startDateTime.setHours(10, 0, 0, 0);\n    else if (startPeriod === 3) startDateTime.setHours(11, 0, 0, 0);\n    else if (startPeriod === 4) startDateTime.setHours(12, 0, 0, 0);\n    else if (startPeriod === 5) startDateTime.setHours(13, 0, 0, 0);\n    else if (startPeriod === 6) startDateTime.setHours(14, 0, 0, 0);\n    else if (startPeriod === 7) startDateTime.setHours(15, 0, 0, 0);\n    else if (startPeriod === 8) startDateTime.setHours(16, 0, 0, 0);\n    else if (startPeriod === 9) {\n      startDateTime.setHours(16, 30, 0, 0);\n    }\n  \n    const endDateTime = new Date(baseDate);\n    endDateTime.setDate(baseDate.getDate() + day - 1);\n    if (endDateTime === 1) endDateTime.setHours(9, 0, 0, 0);\n    else if (endPeriod === 2) endDateTime.setHours(10, 0, 0, 0);\n    else if (endPeriod === 3) endDateTime.setHours(11, 0, 0, 0);\n    else if (endPeriod === 4) endDateTime.setHours(12, 0, 0, 0);\n    else if (endPeriod === 5) endDateTime.setHours(13, 0, 0, 0);\n    else if (endPeriod === 6) endDateTime.setHours(14, 0, 0, 0);\n    else if (endPeriod === 7) endDateTime.setHours(15, 0, 0, 0);\n    else if (endPeriod === 8) endDateTime.setHours(16, 0, 0, 0);\n    else if (endPeriod === 9) {\n        endDateTime.setHours(16, 30, 0, 0);\n    }\n    return {\n      startPeriod: startDateTime.toJSON(),\n      endPeriod: endDateTime.toJSON()\n    };\n  }\n  \n  \n  \n  // 举例：星期三（day: 3），第 4 節（startPeriod: 4），第 5 節（endPeriod: 5）\n \n  \nexport async function sendApply(classroomID, selectedPeriod) {\n    const result = convertToTimeString(selectedPeriod.day, selectedPeriod.startPeriod, selectedPeriod.endPeriod);\n    const apiUrl = 'https://qiuye.mooo.com/api/app/sendApply';\n    const account = JSON.parse(localStorage.getItem('loggedInAccount'));\n    selectedPeriod=result;\n    console.log(selectedPeriod);\n    try {\n        const response = await fetch(apiUrl, {\n            method: 'POST', // 或者 'PUT'，取決於你的後端接口\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ classroomID: classroomID, selectedPeriod: selectedPeriod, userAccount: account })\n        });\n\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n\n        const data = await response.json();\n        console.log(data.code)\n        if (data.code == \"200\") return 200;\n        else if (data.code == \"400\") return 400;\n    } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        throw error;\n    }\n}\n/*\n  input:\n    classroomID: <string>教室ID\n    selectedPeriod: { day: <int>星期幾, startPeriod: <int>開始節數, endPeriod: <int>結束節數 }\n  userAccount: <string>\n  \n  return:\n    if 申請成功 -> return 200\n    if 申請失敗 -> return 400\n*/\n\nexport async function cancelApply(pid) {\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/cancelApply`, {\n            method: 'POST', // 假设取消申请是一个DELETE请求\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`取消申请失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('取消申请成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('取消申请时发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function deletePeriodData(pid) { // 刪除特定狀態的借用紀錄 (user) ( ex: 申請被拒絕 / 借用完畢(已還鑰匙) / 已取消申請 )\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/deletePeriodData`, {\n            method: 'POST', // 假设刪除申请是一个DELETE请求\n            headers: {\n                'Content-Type': 'application/json',\n                'Origin': 'Origin',\n            },\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`取消申请失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('刪除申請成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('刪除申請时发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function LendKey(pid) { // 借出鑰匙 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/LendKey`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Origin': 'Origin',\n            },\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`借出鑰匙失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('借出鑰匙成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('借出鑰匙时发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function ReceiveKey(pid) { // 收到歸還的鑰匙 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/ReceiveKey`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Origin': 'Origin',\n            },\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`歸還鑰匙失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('歸還鑰匙成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('歸還鑰匙发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function acceptRequest(pid) { // 接受一個時段申請 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/acceptRequest`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ pid }),\n            credentials: 'include',\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`接受時段申請失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('接受時段申請成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('接受時段申請发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function rejectRequest(pid) { // 拒絕一個時段申請 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/rejectRequest`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`拒絕時段申請失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('拒絕時段申請成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('拒絕時段申請发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function getAllUserPoint() { // 獲取所有的user的計點狀況 (admin)\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getAllUserPoint', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({}),\n        });\n\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        throw error;\n    }\n}\n\nexport async function getUserPoint(userAccount) { // 獲取user的記點狀況 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getUserPoint', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ account: userAccount }),\n        });\n\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        throw error;\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    account: <string>學號(帳號)\n  \n  return:\n    <int>違規點數\n*/\n//async\nexport async function setUserPoint(account, point) {\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/setUserPoint', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ account, point }),\n        });\n\n        if (!response.ok) {\n            throw new Error(`请求失败，状态码: ${response.status}`);\n        }\n\n        return 200;\n    } catch (error) {\n        console.error('设置用户计分数据失败', error.message || error);\n        throw error;\n    }\n}\n\n/*\n  input:\n    account: <string>學號(帳號)\n    point: <int>違規點數\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function setUserBanState(account, state) {\n    // 可修改區 start\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/setUserBanState', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ account, state }),\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        return response.status;\n    } catch (error) {\n        console.error('设置用户计分数据失败', error);\n        throw error;\n    }\n    // 可修改區 end\n}","export async function getIsSave(classroomID) {\n    var account = localStorage.getItem('loggedInAccount').toString();\n    if (classroomID != null) {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getIsSave', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include', // 添加这一行以携带凭据\n            body: JSON.stringify({\n                userAccount: account,\n                classroomID: classroomID\n            }),\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n        return response.json();\n    }\n    return false;\n}\n\n/*\ninput:\n  classroomID: 教室id\nuserAccount: <string>\n\nreturn: <bool>\n*/\n\nexport async function addSave(classroomID) { // 添加收藏\n    // alert(`[api/save/addSave]\\nclassroomID = ${classroomID}`); // debug\n    const account = localStorage.getItem('loggedInAccount');\n    await fetch('https://qiuye.mooo.com/api/app/addSave', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n            userAccount: account,\n            classroomID: classroomID,\n        }),\n    });\n}\n/*\ninput:\n  classroomID: 教室id\nuserAccount: <string>\n*/\n\nexport async function removeSave(classroomID) { // 移除收藏\n    const account = localStorage.getItem('loggedInAccount');\n    await fetch('https://qiuye.mooo.com/api/app/romoveSave', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n            userAccount: account,\n            classroomID: classroomID,\n        }),\n    });\n}\n/*\ninput:\n  classroomID: 教室id\nuserAccount: <string>\n*/\n\nexport async function getAllSave() { // user的全部收藏\n\n    const account = localStorage.getItem('loggedInAccount');\n    const response = await fetch('https://qiuye.mooo.com/api/app/getAllSave', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ userAccount: account }),\n    });\n\n    if (!response.ok) {\n        throw new Error('请求失败');\n    }\n\n    const data = await response.json();\n\n    const arr = [];\n\n    // 遍歷 data 中的每個屬性\n    for (const key in data) {\n        // 檢查屬性值是否為 true\n        if (data[key] === true) {\n            // 如果是 true，將該鍵添加到 arr 中\n            arr.push(key);\n        }\n    }\n    console.log(arr);\n    return arr;\n\n\n}\n/*\nuserAccount: <string>\n\nreturn: <array>\n*/","import classroomInfo from \"@/assets/classroom-info.json\"; // 教室資訊\n\nexport function getClassroomInfo(classroomID){ // 獲得教室資料\n  const classroom_default = { building: \"未知的大樓\", name: \"未知\", number: \"-\", equipment: \"-\" };\n  let classroom = classroom_default;\n  if (classroomID in classroomInfo) classroom = classroomInfo[classroomID];\n  classroom.id = classroomID;\n  return { ...classroom }; // copy\n}\n/*\n  為什麼要多寫一個function是因為要處理沒有資料的教室\n  如果是需要拿到\"有資料\"的全部教室代號,會直接在vue檔內 import \"classroom-info.json\"\n*/","<template>\n  <span class=\"ts-icon is-star-icon\" :class=\"isSave?'saveButton-saved':'saveButton'\" @click=\"clickSaveButton\"></span>\n</template>\n\n<script>\n  import allClassroomInfo from \"@/assets/classroom-info.json\"; // 全部的教室資訊\n  import { getIsSave, addSave, removeSave } from '@/api/save';\n\n  export default{\n    props: [\n      \"classroomID\"\n    ],\n    data(){\n      return {\n        isSave: false // cilent端的\"教室是否被收藏\"\n      }\n    },\n    async created(){\n      this.isSave = await getIsSave(this.classroomID); // 頁面載入時,更新cilent端的\"教室是否被收藏\"\n    },\n    methods: {\n      async clickSaveButton(){ // 更新user的\"教室是否被收藏\"\n        if (!(this.classroomID in allClassroomInfo)) return; // 如果教室資料不存在,無法更新\n        \n        this.isSave = !this.isSave;\n        if (this.isSave) addSave(this.classroomID);\n        else removeSave(this.classroomID);\n      }\n    },\n    watch: {\n      async classroomID(){ // 教室id改變時,更新cilent端的\"教室是否被收藏\"\n        this.isSave = await getIsSave(this.classroomID);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .saveButton{\n    margin: -5.5px 0 0 6px;\n    border: none;\n    color: #fff; font-size: 20px;\n    -webkit-text-stroke: 1px #666;\n  }\n  .saveButton-saved{\n    margin: -5.5px 0 0 6px;\n    border: none;\n    color: #f80; font-size: 20px;\n    -webkit-text-stroke: 1px;\n  }\n</style>\n<style>\n  .saveButton-tdFix{ /* bad solution */\n    padding-bottom: 0 !important;\n    display: flex;\n  }\n</style>","import { render } from \"./SaveButton.vue?vue&type=template&id=41dc2018&scoped=true\"\nimport script from \"./SaveButton.vue?vue&type=script&lang=js\"\nexport * from \"./SaveButton.vue?vue&type=script&lang=js\"\n\nimport \"./SaveButton.vue?vue&type=style&index=0&id=41dc2018&scoped=true&lang=css\"\nimport \"./SaveButton.vue?vue&type=style&index=1&id=41dc2018&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41dc2018\"]])\n\nexport default __exports__"],"names":["async","getUserPeriodData","account","localStorage","getItem","response","fetch","method","headers","credentials","body","JSON","stringify","userAccount","ok","Error","data","json","dataArray","Object","values","updatedData","map","item","startTotalMinutes","getMinutesFromTimeString","period","startPeriod","endTotalMinutes","endPeriod","n1","Math","ceil","n2","day","Date","n3","getDay","newPeriod","console","log","error","getAllUserPeriodData","timeString","date","hours","getHours","minutes","getMinutes","getEnablePeriodData","classroomID","setEnablePeriod","enablePeriod","apiUrl","status","getAllEnablePeriodData","convertToTimeString","baseDate","startDateTime","setDate","getDate","setHours","endDateTime","toJSON","sendApply","selectedPeriod","result","parse","code","cancelApply","pid","message","deletePeriodData","LendKey","ReceiveKey","acceptRequest","rejectRequest","getAllUserPoint","getUserPoint","setUserPoint","point","setUserBanState","state","getIsSave","toString","addSave","removeSave","getAllSave","arr","key","push","getClassroomInfo","classroom_default","building","name","number","equipment","classroom","classroomInfo","id","_createElementBlock","class","_normalizeClass","$data","isSave","onClick","_cache","args","$options","clickSaveButton","props","created","this","methods","allClassroomInfo","watch","__exports__","render"],"sourceRoot":""}