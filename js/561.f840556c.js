"use strict";(self["webpackChunkcr"]=self["webpackChunkcr"]||[]).push([[561],{561:function(t,n,i){i.r(n),i.d(n,{default:function(){return R}});var o=i(3396);function l(t,n,i,l,e,a){const s=(0,o.up)("user-info-table");return(0,o.wg)(),(0,o.j4)(s,{"insert-data":l.insertData},null,8,["insert-data"])}var e=i(4870),a=i(9242),s=i(7139);const c=t=>((0,o.dD)("data-v-7070bba2"),t=t(),(0,o.Cn)(),t),u={class:"ts-box borderShadow"},r={class:"main-table ts-table is-celled"},d={class:"main-table-fliter-account"},p={class:"ts-input is-start-icon is-solid"},_=c((()=>(0,o._)("span",{class:"ts-icon is-magnifying-glass-icon"},null,-1))),b={class:"ts-select is-solid"},f=c((()=>(0,o._)("option",{value:"0"},"學生",-1))),w=c((()=>(0,o._)("option",{value:"1"},"教師",-1))),g=c((()=>(0,o._)("option",{value:"2"},"管理員",-1))),h=[f,w,g],k=c((()=>(0,o._)("td",null,null,-1))),P={class:"ts-select is-solid"},B=c((()=>(0,o._)("option",{value:"0"},"正常",-1))),m=c((()=>(0,o._)("option",{value:"1"},"被封鎖",-1))),y=[B,m],v=c((()=>(0,o._)("span",{class:"ts-icon is-rotate-right-icon"},null,-1))),C=[v],D=c((()=>(0,o._)("tr",null,[(0,o._)("td",null,"使用者"),(0,o._)("td",null,"身分"),(0,o._)("td",null,"違規點數"),(0,o._)("td",null,"狀態"),(0,o._)("td",null,[(0,o._)("span",{class:"ts-icon is-gears-icon"})])],-1))),F={class:"rowData-point"},x=["onClick"],S=["onClick"],z=["onClick"];function T(t,n,i,l,e,c){return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("table",r,[(0,o._)("tbody",null,[(0,o._)("tr",null,[(0,o._)("td",d,[(0,o._)("div",p,[_,(0,o.wy)((0,o._)("input",{type:"text",placeholder:"學號","onUpdate:modelValue":n[0]||(n[0]=t=>e.fliter.account=t)},null,512),[[a.nr,e.fliter.account]])])]),(0,o._)("td",null,[(0,o._)("div",b,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>e.fliter.role=t)},h,512),[[a.bM,e.fliter.role]])])]),k,(0,o._)("td",null,[(0,o._)("div",P,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[2]||(n[2]=t=>e.fliter.banned=t)},y,512),[[a.bM,e.fliter.banned]])])]),(0,o._)("td",null,[(0,o._)("span",{class:"ts-icon is-caret-left-icon main-table-resetButton iconButton",title:"重置篩選器",onClick:n[3]||(n[3]=(...t)=>c.resetFliter&&c.resetFliter(...t))},C)])]),D,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.insertData,(t=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("tr",{key:t.account},[(0,o._)("td",null,(0,s.zw)(t.account),1),(0,o._)("td",null,(0,s.zw)(e.getRoleText[t.role]),1),(0,o._)("td",null,[(0,o.wy)((0,o._)("span",{class:"ts-icon is-minus-icon iconButton",onClick:n[4]||(n[4]=(...t)=>c.minusPointButton&&c.minusPointButton(...t))},null,512),[[a.F8,e.editingPoint.account==t.account]]),(0,o._)("span",F,(0,s.zw)(e.editingPoint.account==t.account?e.editingPoint.point:t.point),1),(0,o.wy)((0,o._)("span",{class:"ts-icon is-plus-icon iconButton",onClick:n[5]||(n[5]=(...t)=>c.plusPointButton&&c.plusPointButton(...t))},null,512),[[a.F8,e.editingPoint.account==t.account]]),(0,o.wy)((0,o._)("span",{class:"ts-icon is-check-icon iconButton",title:"確定修改",onClick:n[6]||(n[6]=(...t)=>c.confirmPointButton&&c.confirmPointButton(...t))},null,512),[[a.F8,e.editingPoint.account==t.account]]),(0,o.wy)((0,o._)("span",{class:"ts-icon is-pen-icon iconButton",title:"修改違規點數",onClick:n=>c.editPointButton(t)},null,8,x),[[a.F8,!(e.editingPoint.account==t.account)]])]),(0,o._)("td",null,(0,s.zw)(e.getStateText[t.banned]),1),(0,o._)("td",null,[0==t.banned?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"ts-icon is-ban-icon iconButton-danger",title:"封鎖",onClick:n=>c.banButton(t.account)},null,8,S)):(0,o.kq)("",!0),1==t.banned?((0,o.wg)(),(0,o.iD)("span",{key:1,class:"ts-icon is-unlock-icon iconButton",title:"解除封鎖",onClick:n=>c.unbanButton(t.account)},null,8,z)):(0,o.kq)("",!0)])])),[[a.F8,c.isShow(t)]]))),128))])])])}var U=i(5591),$={props:{insertData:{default:[]}},data(){return{getRoleText:["學生","教師","管理員"],getStateText:["正常","被封鎖"],fliter:null,editingPoint:{account:null,point:null}}},created(){this.resetFliter()},methods:{resetFliter(){this.fliter={account:"",role:null,banned:null}},isShow(t){let n=!0;return t.account.includes(this.fliter.account)||(n=!1),null!=this.fliter.role&&t.role!=this.fliter.role&&(n=!1),null!=this.fliter.banned&&t.banned!=this.fliter.banned&&(n=!1),n},editPointButton(t){this.editingPoint.account=t.account,this.editingPoint.point=t.point},minusPointButton(){this.editingPoint.point>0&&this.editingPoint.point--},plusPointButton(){this.editingPoint.point<10&&this.editingPoint.point++},async confirmPointButton(){const t=window.confirm("是否要修改違規點數 ?");if(t){const t=await(0,U.iU)(this.editingPoint.account,this.editingPoint.point);switch(t){case 200:alert("修改成功 !");break;case 400:alert("修改失敗 !");break;default:alert("修改成功 !");break}window.location.reload()}this.editingPoint.account=null},async runConfirmDialog(t,n,i,o,l){const e=window.confirm(`${t} ?`);if(!e)return;const a=await i(o,l);switch(a){case 200:alert(`${n}成功 !`);break;case 400:alert(`${n}失敗 !`);break;default:alert(`${n}成功 !`);break}window.location.reload()},banButton(t){this.runConfirmDialog("是否要封鎖此人","封鎖",U.yj,t,1)},unbanButton(t){this.runConfirmDialog("是否要解除封鎖","解除封鎖",U.yj,t,0)}}},j=i(89);const V=(0,j.Z)($,[["render",T],["__scopeId","data-v-7070bba2"]]);var q=V,H={components:{"user-info-table":q},setup(){const t=(0,e.iH)([]);return(0,o.bv)((async()=>{try{t.value=await(0,U.tX)()}catch(n){console.error("获取用户积分数据时发生错误:",n)}})),{insertData:t}}};const M=(0,j.Z)(H,[["render",l]]);var R=M}}]);
//# sourceMappingURL=561.f840556c.js.map