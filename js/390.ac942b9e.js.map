{"version":3,"file":"js/390.ac942b9e.js","mappings":"uOACEA,EAAAA,EAAAA,IAA0EC,EAAA,CAA7D,aAAY,CAAAC,OAAA,SAAsB,cAAaC,EAAAC,Y,kEAQ9D,GACEC,WAAY,CACV,aAAcC,EAAAA,GAEhBC,IAAAA,GACE,MAAO,CACLH,WAAY,GAEhB,EACA,aAAMI,GACJ,MAAMC,QAAyBC,EAAAA,EAAAA,MACzBC,EAAeC,EAAAA,EAAkBC,OAEvC,IAAK,IAAIC,KAAeC,OAAOC,KAAKP,GAAmB,CACrD,IAAIQ,EAAcC,MAAMC,KAAKD,MAAM,IAAQ,IAAMA,MAAM,EAAIP,GAAcS,MAAK,KAE9E,IAAK,MAAMC,KAAKZ,EAAiBK,GAC/B,IAAK,IAAIQ,EAAID,EAAEE,YAAaD,GAAKD,EAAEG,UAAWF,IAAKL,EAAYI,EAAEI,KAAKH,IAAK,EAI7E,MAAMI,QAA0BC,EAAAA,EAAAA,MAEhC,IAAK,MAAMN,KAAKN,OAAOa,OAAOF,GAC5B,GAAIL,EAAEP,aAAeA,IAA4B,GAAZO,EAAEQ,QAA2B,GAAZR,EAAEQ,QACtD,IAAK,IAAIP,EAAID,EAAEnB,OAAOqB,YAAaD,GAAKD,EAAEnB,OAAOsB,UAAWF,IAAKL,EAAYI,EAAEnB,OAAOuB,KAAKH,IAAK,EAKpG,IAAK,IAAIG,EAAM,EAAGA,GAAO,EAAGA,IAAO,CACjC,IAAIJ,EAAI,KACR,IAAK,IAAInB,EAAS,EAAGA,GAAUS,EAAcT,IACvCe,EAAYQ,GAAKvB,GACV,MAALmB,EAAWA,EAAI,CAAEI,IAAKA,EAAKF,YAAarB,EAAQsB,UAAWtB,GAC1DmB,EAAEG,UAAYtB,EAEV,MAALmB,IACFS,KAAK1B,WAAW2B,KAAK,CAAEjB,YAAaA,EAAaZ,OAAQmB,IACzDA,EAAI,MAID,MAALA,IACFS,KAAK1B,WAAW2B,KAAK,CAAEjB,YAAaA,EAAaZ,OAAQmB,IACzDA,EAAI,KAER,CACF,CACF,G,QCrDF,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://cr/./src/components/user/SearchPage.vue","webpack://cr/./src/components/user/SearchPage.vue?d4a7"],"sourcesContent":["<template>\n  <data-table :enable-col=\"{ period: '可借用時段' }\" :insert-data=\"insertData\" />\n</template>\n\n<script>\nimport dataTable from \"./other/DataTable.vue\";\nimport config from \"@/assets/schedule-config.json\"; // 課表時段的設定檔\nimport { getAllEnablePeriodData, getAllUserPeriodData } from '@/api/app';\n\nexport default {\n  components: {\n    \"data-table\": dataTable\n  },\n  data() {\n    return {\n      insertData: []\n    }\n  },\n  async created() {\n    const enablePeriodData = await getAllEnablePeriodData(); // 全部教室的借用資料\n    const periodNumber = config.periodTime.length;\n\n    for (let classroomID of Object.keys(enablePeriodData)) {\n      let periodState = Array.from(Array(1 + 5), () => Array(1 + periodNumber).fill(false));\n\n      for (const p of enablePeriodData[classroomID]) {\n        for (let i = p.startPeriod; i <= p.endPeriod; i++) periodState[p.day][i] = true;\n      }\n\n\n      const allUserPeriodData = await getAllUserPeriodData(); // 使用 await 等待函數完成\n\n      for (const p of Object.values(allUserPeriodData)) {\n        if (p.classroomID == classroomID && (p.status == 2 || p.status == 3)) {\n          for (let i = p.period.startPeriod; i <= p.period.endPeriod; i++) periodState[p.period.day][i] = false;\n\n        }\n      }\n\n      for (let day = 1; day <= 5; day++) {\n        let p = null;\n        for (let period = 1; period <= periodNumber; period++) {\n          if (periodState[day][period]) {\n            if (p == null) p = { day: day, startPeriod: period, endPeriod: period };\n            else p.endPeriod = period;\n          } else {\n            if (p != null) {\n              this.insertData.push({ classroomID: classroomID, period: p });\n              p = null;\n            }\n          }\n        }\n        if (p != null) {\n          this.insertData.push({ classroomID: classroomID, period: p });\n          p = null;\n        }\n      }\n    }\n  }\n\n}\n</script>","import { render } from \"./SearchPage.vue?vue&type=template&id=1866702f\"\nimport script from \"./SearchPage.vue?vue&type=script&lang=js\"\nexport * from \"./SearchPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_data_table","period","$data","insertData","components","dataTable","data","created","enablePeriodData","getAllEnablePeriodData","periodNumber","config","length","classroomID","Object","keys","periodState","Array","from","fill","p","i","startPeriod","endPeriod","day","allUserPeriodData","getAllUserPeriodData","values","status","this","push","__exports__","render"],"sourceRoot":""}