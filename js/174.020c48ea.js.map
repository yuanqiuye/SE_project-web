{"version":3,"file":"js/174.020c48ea.js","mappings":"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","sources":["webpack://cr/./src/components/user/FloorPage.vue","webpack://cr/./src/components/user/floorPage/ApplyArea.vue","webpack://cr/./src/components/user/floorPage/ApplyArea.vue?ae6a","webpack://cr/./src/components/user/FloorPage.vue?cea5"],"sourcesContent":["<template>\n  <building-selector @building=\"(v)=>{building=v;}\"/>\n  <floor-selector :in-building=\"building\" @classroomID=\"(v)=>{classroomID=v;}\"/>\n  <classroom-info :classroomID=\"classroomID\"/>\n  <apply-area :classroomID=\"classroomID\"/>\n</template>\n\n<script>\n  import buildingSelector from \"./floorPage/buildingSelector.vue\"; // 樓層切換的元件\n  import floorSelector from \"./floorPage/FloorSelector.vue\"; // 平面圖的元件\n  import classroomInfo from \"./floorPage/ClassroomInfo.vue\"; // 教室資訊欄的元件\n  import applyArea from \"./floorPage/ApplyArea.vue\"; // 課表欄&申請確認框的元件\n  \n  export default{\n    components: {\n      \"building-selector\": buildingSelector,\n      \"floor-selector\": floorSelector,\n      \"classroom-info\": classroomInfo,\n      \"apply-area\": applyArea\n    },\n    data(){\n      return {\n        building: null, // 現在是哪棟樓\n        classroomID: null // classroom資料\n      }\n    }\n  }\n</script>","<template>\n  <div class=\"applyArea\">\n    <div class=\"schedule ts-box borderShadow\">\n      <table class=\"ts-table is-definition is-celled\">\n        <thead>\n          <tr>\n            <th></th>\n            <th>星期一</th>\n            <th>星期二</th>\n            <th>星期三</th>\n            <th>星期四</th>\n            <th>星期五</th>\n          </tr>\n        </thead>\n        <tbody ref=\"scheduleTable\" @click=\"clickScheduleTable\">\n          <tr v-for=\"(period, rowIndex) in periodTime\" :key=\"rowIndex\">\n            <td>\n              <div>第&nbsp;&nbsp;{{ period.nth }}&nbsp;&nbsp;節</div>\n              {{ period.startTime }}&nbsp;~&nbsp;{{ period.endTime }}\n            </td>\n            <td v-for=\"columnIndex in 5\" :key=\"columnIndex\"></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div>\n      <div class=\"confirm box\">\n        <span class=\"confirm-emptyText\" v-show=\"!confirm.enable\">\n          <span class=\"ts-icon is-plus-icon is-huge\"></span>\n          目前沒有選取任何時段，請直接點選左側的課表。\n        </span>\n        <span class=\"confirm-text\" v-show=\"confirm.enable\">\n          <span class=\"confirm-title\">[ 已選擇 ]</span><br>\n          <span>\n            {{ classroomInfo.building }}<br>\n            {{ classroomInfo.name }}<br>\n            {{ confirm.day }}&nbsp;{{ confirm.time }}&nbsp;(&nbsp;{{ confirm.period }}&nbsp;)\n          </span>\n        </span>\n        <div class=\"confirm-buttons\" v-show=\"confirm.enable\">\n          <button class=\"borderShadow ts-button is-accent\" @click=\"clickApplyButton()\">送出申請</button>\n          <button class=\"borderShadow ts-button is-accent is-secondary\" @click=\"resetsDP()\">取消並重置</button>\n        </div>\n      </div>\n      <div class=\"periodLegend box\">\n        <div class=\"ts-box is-collapsed\">\n          <table class=\"ts-table is-collapsed is-celled\">\n            <tbody>\n              <tr v-for=\"legend in legendData\" :key=\"legend.color\">\n                <td :style=\"{ width: '50px', backgroundColor: legend.color }\"></td>\n                <td>{{ legend.name }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport config from \"@/assets/schedule-config.json\"; // 課表時段的設定檔\nimport { getClassroomInfo } from \"@/assets/import\"; // 查詢教室資訊\nimport { getEnablePeriodData, getAllUserPeriodData, getUserPeriodData, sendApply } from '@/api/app';\n\nexport default {\n  props: [\n    \"classroomID\"\n  ],\n  data() {\n    return {\n      classroomInfo: getClassroomInfo(null),\n      periodTime: config.periodTime, // 第幾節,各節次的開始和結束時間\n      periodState: null,\n      sDP: { day: null, startPeriod: null, endPeriod: null }, // selected day & period\n      confirm: { enable: false, day: \"\", time: \"\", period: \"\" },\n      legendData: [\n        { name: \"選取的時段\", color: \"#aaf\" },\n        { name: \"可借用\", color: \"#fff\" },\n        { name: \"被別人借用\", color: \"#fbb\" },\n        { name: \"被自己借用\", color: \"#bfb\" },\n        { name: \"無法借用\", color: \"#bbb\" },\n      ]\n    }\n  },\n  mounted() {\n    this.initScheduleTable();\n  },\n  methods: {\n    setCellBgColor(day, period, color) { // 更改課表某一格的顏色\n      const e_table = this.$refs.scheduleTable;\n      try {\n        e_table.rows[period - 1].cells[day].style.backgroundColor = color;\n      } catch (e) { true } // unknown bug\n    },\n    async initScheduleTable() { // 初始化課表\n      const colorTable = { 0: \"#fff\", 1: \"#fbb\", 2: \"#bfb\", 100: \"#bbb\" };\n      // 時段借用狀態: { 0: 可借用, 1: 已被借用, 2: 被自己借用, 100: 無法借用 }\n\n      this.periodState = Array.from(Array(1 + 5), () => Array(this.periodTime.length + 1).fill(100));\n      // 生成空狀態表(表格全部填無法借用)\n\n      try {\n        const enablePeriod = await getEnablePeriodData(this.classroomInfo.id);\n        const enablePeriodArray = Object.values(enablePeriod);\n\n        for (const p of enablePeriodArray) {\n          for (let i = p.startPeriod; i <= p.endPeriod; i++) {\n            this.periodState[p.day][i] = 0; // 更新狀態表 (0: 可借用)\n          }\n        }\n        // 更新狀態表(可借用)\n\n        const allUserPeriodData = await getAllUserPeriodData();\n\n        for (const p of allUserPeriodData) {\n          if (p.classroomID == this.classroomInfo.id && (p.status == 2 || p.status == 3)) {\n            // 教室相同,狀態介於2~5之間代表被借走\n            for (let i = p.period.startPeriod; i <= p.period.endPeriod; i++) {\n              this.periodState[p.period.day][i] = 1; // 更新狀態表 (1: 已被借用)\n            }\n          }\n        }\n        // 更新狀態表(已被借用)\n\n        const userPeriodData = await getUserPeriodData();\n\n        for (const p of Object.values(userPeriodData)) {\n          if (p.classroomID == this.classroomInfo.id && (p.status == 2 || p.status == 3)) {\n            // 教室相同,狀態介於2~5之間代表正在借用\n            for (let i = p.period.startPeriod; i <= p.period.endPeriod; i++) {\n              this.periodState[p.period.day][i] = 2; // 更新狀態表 (2: 被自己借用)\n            }\n          }\n        }\n        // 更新狀態表(被自己借用)\n\n        for (let day = 1; day <= 5; day++) { // 依照狀態表,幫表格塗色\n          for (let period = 1; period <= this.periodTime.length; period++) {\n            this.setCellBgColor(day, period, colorTable[this.periodState[day][period]]);\n          }\n        }\n      } catch (error) {\n        console.error('Error during schedule table initialization:', error);\n      }\n    },\n\n    resetsDP() { // 重設選取的節次\n      if (this.sDP.day == null) return; // 如果是未選取狀態則不用重設\n\n      for (let i = this.sDP.startPeriod; i <= this.sDP.endPeriod; i++) this.setCellBgColor(this.sDP.day, i, \"#fff0\"); // 重設格子的顏色\n      this.sDP = { day: null, startPeriod: null, endPeriod: null };\n      this.updateConfirmBox();\n    },\n    clickScheduleTable(event) { // 點擊課表的event\n      const e_cell = event.target;\n      if (e_cell.tagName != \"TD\") return; // 如果點擊了不是表格的區域,則不予理會\n\n      const day = e_cell.cellIndex;\n      const period = this.periodTime[e_cell.parentNode.rowIndex - 1].nth;\n      if (!(day >= 1 && period >= 1)) return; // 如果點擊了不是格子的區域,則不予理會\n\n      if (this.periodState[day][period] != 0) return; // 如果點擊了無法選取的格子,則不予理會\n\n      if (this.sDP.day == null) { // 如果還沒選時段,選取目前點的格子\n        this.sDP = { day: day, startPeriod: period, endPeriod: period };\n      }\n      else if (day == this.sDP.day && period >= this.sDP.startPeriod - 1 && period <= this.sDP.endPeriod + 1) {\n        // 如果點選的格子介於範圍頭尾&同一天,延長範圍\n        if (period == this.sDP.startPeriod - 1) this.sDP.startPeriod -= 1;\n        if (period == this.sDP.endPeriod + 1) this.sDP.endPeriod += 1;\n      }\n      else { // 如果不符合以上條件,則重設先前選取的範圍,然後選取目前點的格子\n        this.resetsDP();\n        this.sDP = { day: day, startPeriod: period, endPeriod: period };\n      }\n      this.setCellBgColor(day, period, \"#aaf\"); // 點擊後將格子塗色\n\n      this.updateConfirmBox();\n    },\n    updateConfirmBox() { // click格子,更新確認欄的內容\n      this.confirm.enable = (this.sDP.day != null);\n      if (!this.confirm.enable) return;\n\n      const nthDay = [\"\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\"];\n\n      this.confirm.day = nthDay[this.sDP.day]; // 暫定\n      this.confirm.time = `${this.periodTime[this.sDP.startPeriod - 1].startTime}~${this.periodTime[this.sDP.endPeriod - 1].endTime}`;\n      const startPeriod = `${100 * this.sDP.day + this.sDP.startPeriod}`;\n      const endPeriod = `${100 * this.sDP.day + this.sDP.endPeriod}`;\n      if (this.sDP.startPeriod == this.sDP.endPeriod) this.confirm.period = startPeriod;\n      else this.confirm.period = `${startPeriod}~${endPeriod}`;\n    },\n    async clickApplyButton() { // 按下申請按鈕\n      const returnCode =await sendApply(this.classroomInfo.id, this.sDP);\n      switch (returnCode) {\n        case 200:\n          alert(\"申請成功 !\\n請至借用紀錄頁面查看最新狀態，管理員將盡速審核你的請求。\\n鑰匙歸還期限為借用日後一日系辦關門前。\");\n          break;\n        case 400:\n          alert(\"申請失敗 !\");\n          break;\n        default:\n          alert(\"未知錯誤\");\n          break;\n      }\n      this.resetsDP(); // 重設選取的時段\n      window.location.reload(); //force reload\n    }\n  },\n  watch: {\n    classroomID(newValue) {\n      this.classroomInfo = getClassroomInfo(newValue);\n      this.resetsDP();\n      this.initScheduleTable();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.applyArea {\n  margin-top: 8px;\n  display: flex;\n}\n\n.schedule {\n  white-space: nowrap;\n}\n\n.schedule table td,\nth {\n  text-align: center;\n  vertical-align: middle;\n}\n\n.schedule table td:first-child {\n  padding: 6px;\n  font-size: 11px;\n}\n\n.schedule table td:first-child>div {\n  font-size: 14px;\n}\n\n.confirm {\n  width: 300px;\n  height: fit-content;\n  margin-left: 8px;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.confirm-emptyText {\n  margin-bottom: 8px;\n  font-size: 12px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.confirm-emptyText>span.ts-icon {\n  margin-bottom: -10px;\n}\n\n.confirm-title {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.confirm-text {\n  margin: 12px 0;\n  font-size: 16px;\n  text-align: center;\n}\n\n.confirm-buttons {\n  margin: 12px 0;\n  display: flex;\n  justify-content: space-around;\n}\n\n.confirm-buttons>button {\n  border: none;\n}\n\n.confirm-buttons>button:nth-child(1):hover {\n  background-color: #46c;\n}\n\n.confirm-buttons>button:nth-child(2) {\n  margin-left: 16px;\n}\n\n.confirm-buttons>button:nth-child(2):hover {\n  background-color: #ddd;\n}\n\n.periodLegend {\n  width: 300px;\n  height: fit-content;\n  margin: 8px 0 0 8px;\n  padding: 8px;\n}\n</style>","import { render } from \"./ApplyArea.vue?vue&type=template&id=3026f076&scoped=true\"\nimport script from \"./ApplyArea.vue?vue&type=script&lang=js\"\nexport * from \"./ApplyArea.vue?vue&type=script&lang=js\"\n\nimport \"./ApplyArea.vue?vue&type=style&index=0&id=3026f076&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3026f076\"]])\n\nexport default __exports__","import { render } from \"./FloorPage.vue?vue&type=template&id=74b2c6d5\"\nimport script from \"./FloorPage.vue?vue&type=script&lang=js\"\nexport * from \"./FloorPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createVNode","_component_building_selector","onBuilding","_cache","v","$data","building","_component_floor_selector","onClassroomID","classroomID","_component_classroom_info","_component_apply_area","class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","ref","onClick","args","$options","clickScheduleTable","_Fragment","_renderList","periodTime","period","rowIndex","key","_toDisplayString","nth","startTime","endTime","columnIndex","_hoisted_5","_hoisted_6","_hoisted_7","confirm","enable","_hoisted_8","_hoisted_9","_hoisted_10","classroomInfo","_hoisted_11","name","_hoisted_12","day","time","_hoisted_13","$event","clickApplyButton","resetsDP","_hoisted_14","_hoisted_15","_hoisted_16","legendData","legend","color","style","_normalizeStyle","width","backgroundColor","props","data","getClassroomInfo","config","periodState","sDP","startPeriod","endPeriod","mounted","this","initScheduleTable","methods","setCellBgColor","e_table","$refs","scheduleTable","rows","cells","e","colorTable","Array","from","length","fill","enablePeriod","getEnablePeriodData","id","enablePeriodArray","Object","values","p","i","allUserPeriodData","getAllUserPeriodData","status","userPeriodData","getUserPeriodData","error","console","updateConfirmBox","event","e_cell","target","tagName","cellIndex","parentNode","nthDay","returnCode","sendApply","alert","window","location","reload","watch","newValue","__exports__","components","buildingSelector","floorSelector","applyArea","render"],"sourceRoot":""}