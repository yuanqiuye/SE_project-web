{"version":3,"file":"js/470.4acf68ca.js","mappings":"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","sources":["webpack://cr/./src/api/app.js","webpack://cr/./src/api/save.js","webpack://cr/./src/assets/import.js","webpack://cr/./src/components/user/other/SaveButton.vue","webpack://cr/./src/components/user/other/SaveButton.vue?47f4"],"sourcesContent":["// import enablePeriod from \"@/api/enable-period.json\"; // 後端完成後可刪\n// import user from \"@/api/user-data.json\"; // 後端完成後可刪\n\n//加async、useraccount\nexport async function getUserPeriodData() { // 獲取user的借用資料\n    // 可修改區 start\n\n    const account = localStorage.getItem('loggedInAccount');\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getUserPeriodData', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ userAccount: account }),\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        const data = await response.json();\n        // 将对象的值转换为数组\n        const dataArray = Object.values(data);\n        //console.log(\"dataArray\",data);\n        const updatedData = await Promise.all(dataArray.map(async(item) => {\n            var startTotalMinutes = getMinutesFromTimeString(item.period.startPeriod);\n            var endTotalMinutes = getMinutesFromTimeString(item.period.endPeriod);\n\n            if (startTotalMinutes <= 480) startTotalMinutes = 481;\n\n            const n1 = Math.ceil((startTotalMinutes - 8 * 60) / 60);\n            const n2 = Math.ceil((endTotalMinutes - 8 * 60) / 60);\n            const day = new Date(item.period.startPeriod); //修正\n            const n3 = day.getDay();\n\n            //console.log(n1);\n            //console.log(n2);\n            // 創建新的 period 物件\n            const newPeriod = {\n                \"day\": n3, // 星期幾，這裡是示範值，根據實際情況調整\n                \"startPeriod\": n1, // 開始時間\n                \"endPeriod\": n2 // 結束時間\n            };\n\n            // 將新的 period 物件替換原來的 period\n            item.period = newPeriod;\n\n            return item;\n        }));\n\n        console.log(\"getUserPeriodData\", updatedData);\n\n        // 回傳處理後的 JSON 物件\n        return updatedData;\n        \n\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n\n    // return user.periodData;\n    // 可修改區 end\n}\n\n\n\nexport async function getAllUserPeriodData() {\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getAllUserPeriodData', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        const data = await response.json();\n        // 将对象的值转换为数组\n        const dataArray = Object.values(data);\n        //console.log(\"dataArray\",data);\n        const updatedData = await Promise.all(dataArray.map(async(item) => {\n            var startTotalMinutes = getMinutesFromTimeString(item.period.startPeriod);\n            var endTotalMinutes = getMinutesFromTimeString(item.period.endPeriod);\n\n            if (startTotalMinutes <= 480) startTotalMinutes = 481;\n\n            const n1 = Math.ceil((startTotalMinutes - 8 * 60) / 60);\n            const n2 = Math.ceil((endTotalMinutes - 8 * 60) / 60);\n            const day = new Date(item.period.startPeriod); //修正\n            const n3 = day.getDay();\n\n            //console.log(n1);\n            //console.log(n2);\n            // 創建新的 period 物件\n            const newPeriod = {\n                \"day\": n3, // 星期幾，這裡是示範值，根據實際情況調整\n                \"startPeriod\": n1, // 開始時間\n                \"endPeriod\": n2 // 結束時間\n            };\n\n            // 將新的 period 物件替換原來的 period\n            item.period = newPeriod;\n\n            return item;\n        }));\n\n        console.log(updatedData);\n\n        // 回傳處理後的 JSON 物件\n        return updatedData;\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\n// 將這兩個函數的聲明移到頂部\nfunction getMinutesFromTimeString(timeString) {\n    const date = new Date(timeString);\n    const hours = date.getUTCHours();\n    const minutes = date.getUTCMinutes();\n    return hours * 60 + minutes;\n}\n\n\nexport async function getEnablePeriodData(classroomID) {\n    const response = await fetch('https://qiuye.mooo.com/api/app/getEnablePeriodData', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n\n        },\n        credentials: 'include',\n        body: JSON.stringify({ classroomID }),\n    });\n\n    if (!response.ok) {\n        throw new Error('请求失败');\n    }\n\n    const data = await response.json();\n    return data;\n}\n\n\nexport async function setEnablePeriod(classroomID, enablePeriod) {\n    try {\n        const apiUrl = `https://qiuye.mooo.com/api/app/setEnablePeriod`; // 根据实际后端 API 地址修改\n\n        const response = await fetch(apiUrl, {\n            method: 'POST', // 根据你的 API 需求，可能是 'POST' 或 'PUT'\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ classroomID, enablePeriod }),\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n\n        // 返回响应的数据，如果有的话\n        return response.json();\n    } catch (error) {\n        console.error('Error during setEnablePeriod:', error);\n        throw error;\n    }\n}\n\n\n\n//加async\nexport async function getAllEnablePeriodData() { // 跟後端拿全部教室的可借時段\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getAllEnablePeriodData', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        const data = await response.json();\n        console.log(data)\n        return data;\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n/*\n  return:\n    請參照 enable-period.json\n*/\nfunction convertToTimeString(day, startPeriod, endPeriod) {\n    const baseDate = new Date('2024-01-01');\n  \n    // 计算给定 day、startPeriod 和 endPeriod 对应的时间\n    const startDateTime = new Date(baseDate);\n    startDateTime.setDate(baseDate.getDate() + day - 1);\n  \n    if (startPeriod === 1) startDateTime.setUTCHours(9);\n    else if (startPeriod === 2) startDateTime.setUTCHours(10);\n    else if (startPeriod === 3) startDateTime.setUTCHours(11);\n    else if (startPeriod === 4) startDateTime.setUTCHours(12);\n    else if (startPeriod === 5) startDateTime.setUTCHours(13);\n    else if (startPeriod === 6) startDateTime.setUTCHours(14);\n    else if (startPeriod === 7) startDateTime.setUTCHours(15);\n    else if (startPeriod === 8) startDateTime.setUTCHours(16);\n    else if (startPeriod === 9) {\n      startDateTime.setUTCHours(16);\n      startDateTime.setUTCMinutes(30);\n    }\n  \n    const endDateTime = new Date(baseDate);\n    endDateTime.setDate(baseDate.getDate() + day - 1);\n    if (endDateTime === 1) endDateTime.setUTCHours(9);\n    else if (endPeriod === 2) endDateTime.setUTCHours(10);\n    else if (endPeriod === 3) endDateTime.setUTCHours(11);\n    else if (endPeriod === 4) endDateTime.setUTCHours(12);\n    else if (endPeriod === 5) endDateTime.setUTCHours(13);\n    else if (endPeriod === 6) endDateTime.setUTCHours(14);\n    else if (endPeriod === 7) endDateTime.setUTCHours(15);\n    else if (endPeriod === 8) endDateTime.setUTCHours(16);\n    else if (endPeriod === 9) {\n        endDateTime.setUTCHours(16);\n        endDateTime.setUTCMinutes(30);\n    }\n    return {\n      startPeriod: startDateTime.toJSON(),\n      endPeriod: endDateTime.toJSON()\n    };\n  }\n  \n  \n  \n  // 举例：星期三（day: 3），第 4 節（startPeriod: 4），第 5 節（endPeriod: 5）\n \n  \nexport async function sendApply(classroomID, selectedPeriod) {\n    const result = convertToTimeString(selectedPeriod.day, selectedPeriod.startPeriod, selectedPeriod.endPeriod);\n    const apiUrl = 'https://qiuye.mooo.com/api/app/sendApply';\n    const account = JSON.parse(localStorage.getItem('loggedInAccount'));\n    selectedPeriod=result;\n    console.log(selectedPeriod);\n    try {\n        const response = await fetch(apiUrl, {\n            method: 'POST', // 或者 'PUT'，取決於你的後端接口\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ classroomID: classroomID, selectedPeriod: selectedPeriod, userAccount: account })\n        });\n\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n\n        const data = await response.json();\n        console.log(data.code)\n        if (data.code == \"200\") return 200;\n        else if (data.code == \"400\") return 400;\n    } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        throw error;\n    }\n}\n/*\n  input:\n    classroomID: <string>教室ID\n    selectedPeriod: { day: <int>星期幾, startPeriod: <int>開始節數, endPeriod: <int>結束節數 }\n  userAccount: <string>\n  \n  return:\n    if 申請成功 -> return 200\n    if 申請失敗 -> return 400\n*/\n\nexport async function cancelApply(pid) {\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/cancelApply`, {\n            method: 'POST', // 假设取消申请是一个DELETE请求\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`取消申请失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('取消申请成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('取消申请时发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function deletePeriodData(pid) { // 刪除特定狀態的借用紀錄 (user) ( ex: 申請被拒絕 / 借用完畢(已還鑰匙) / 已取消申請 )\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/deletePeriodData`, {\n            method: 'POST', // 假设刪除申请是一个DELETE请求\n            headers: {\n                'Content-Type': 'application/json',\n                'Origin': 'Origin',\n            },\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`取消申请失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('刪除申請成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('刪除申請时发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function LendKey(pid) { // 借出鑰匙 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/LendKey`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Origin': 'Origin',\n            },\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`借出鑰匙失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('借出鑰匙成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('借出鑰匙时发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function ReceiveKey(pid) { // 收到歸還的鑰匙 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/ReceiveKey`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Origin': 'Origin',\n            },\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`歸還鑰匙失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('歸還鑰匙成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('歸還鑰匙发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function acceptRequest(pid) { // 接受一個時段申請 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/acceptRequest`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ pid }),\n            credentials: 'include',\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`接受時段申請失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('接受時段申請成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('接受時段申請发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function rejectRequest(pid) { // 拒絕一個時段申請 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch(`https://qiuye.mooo.com/api/app/rejectRequest`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ pid }),\n        });\n\n        if (!response.ok) {\n            // 网络请求失败\n            throw new Error(`拒絕時段申請失败，状态码：${response.status}`);\n        }\n\n        const data = await response.json(); // 假设响应包含JSON数据\n        console.log('拒絕時段申請成功', data);\n        return 200; // 返回成功状态码\n    } catch (error) {\n        console.error('拒絕時段申請发生错误', error.message);\n        return 400; // 返回失败状态码\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    pid: <string>時段ID (唯一性)\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function getAllUserPoint() { // 獲取所有的user的計點狀況 (admin)\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getAllUserPoint', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({}),\n        });\n\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        throw error;\n    }\n}\n\nexport async function getUserPoint(userAccount) { // 獲取user的記點狀況 (admin)\n    // 可修改區 start\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getUserPoint', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ account: userAccount }),\n        });\n\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        throw error;\n    }\n    // 可修改區 end\n}\n/*\n  input:\n    account: <string>學號(帳號)\n  \n  return:\n    <int>違規點數\n*/\n//async\nexport async function setUserPoint(account, point) {\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/setUserPoint', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ account, point }),\n        });\n\n        if (!response.ok) {\n            throw new Error(`请求失败，状态码: ${response.status}`);\n        }\n\n        return 200;\n    } catch (error) {\n        console.error('设置用户计分数据失败', error.message || error);\n        throw error;\n    }\n}\n\n/*\n  input:\n    account: <string>學號(帳號)\n    point: <int>違規點數\n  \n  return:\n    if 成功 -> return 200\n    if 失敗 -> return 400\n*/\n\nexport async function setUserBanState(account, state) {\n    // 可修改區 start\n    try {\n        const response = await fetch('https://qiuye.mooo.com/api/app/setUserBanState', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify({ account, state }),\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n\n        return response.status;\n    } catch (error) {\n        console.error('设置用户计分数据失败', error);\n        throw error;\n    }\n    // 可修改區 end\n}","export async function getIsSave(classroomID) {\n    var account = localStorage.getItem('loggedInAccount').toString();\n    if (classroomID != null) {\n        const response = await fetch('https://qiuye.mooo.com/api/app/getIsSave', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include', // 添加这一行以携带凭据\n            body: JSON.stringify({\n                userAccount: account,\n                classroomID: classroomID\n            }),\n        });\n\n        if (!response.ok) {\n            throw new Error('请求失败');\n        }\n        return response.json();\n    }\n    return false;\n}\n\n/*\ninput:\n  classroomID: 教室id\nuserAccount: <string>\n\nreturn: <bool>\n*/\n\nexport async function addSave(classroomID) { // 添加收藏\n    // alert(`[api/save/addSave]\\nclassroomID = ${classroomID}`); // debug\n    const account = localStorage.getItem('loggedInAccount');\n    await fetch('https://qiuye.mooo.com/api/app/addSave', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n            userAccount: account,\n            classroomID: classroomID,\n        }),\n    });\n}\n/*\ninput:\n  classroomID: 教室id\nuserAccount: <string>\n*/\n\nexport async function removeSave(classroomID) { // 移除收藏\n    const account = localStorage.getItem('loggedInAccount');\n    await fetch('https://qiuye.mooo.com/api/app/romoveSave', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n            userAccount: account,\n            classroomID: classroomID,\n        }),\n    });\n}\n/*\ninput:\n  classroomID: 教室id\nuserAccount: <string>\n*/\n\nexport async function getAllSave() { // user的全部收藏\n\n    const account = localStorage.getItem('loggedInAccount');\n    const response = await fetch('https://qiuye.mooo.com/api/app/getAllSave', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ userAccount: account }),\n    });\n\n    if (!response.ok) {\n        throw new Error('请求失败');\n    }\n\n    const data = await response.json();\n\n    const arr = [];\n\n    // 遍歷 data 中的每個屬性\n    for (const key in data) {\n        // 檢查屬性值是否為 true\n        if (data[key] === true) {\n            // 如果是 true，將該鍵添加到 arr 中\n            arr.push(key);\n        }\n    }\n    console.log(arr);\n    return arr;\n\n\n}\n/*\nuserAccount: <string>\n\nreturn: <array>\n*/","import classroomInfo from \"@/assets/classroom-info.json\"; // 教室資訊\n\nexport function getClassroomInfo(classroomID){ // 獲得教室資料\n  const classroom_default = { building: \"未知的大樓\", name: \"未知\", number: \"-\", equipment: \"-\" };\n  let classroom = classroom_default;\n  if (classroomID in classroomInfo) classroom = classroomInfo[classroomID];\n  classroom.id = classroomID;\n  return { ...classroom }; // copy\n}\n/*\n  為什麼要多寫一個function是因為要處理沒有資料的教室\n  如果是需要拿到\"有資料\"的全部教室代號,會直接在vue檔內 import \"classroom-info.json\"\n*/","<template>\n  <span class=\"ts-icon is-star-icon\" :class=\"isSave?'saveButton-saved':'saveButton'\" @click=\"clickSaveButton\"></span>\n</template>\n\n<script>\n  import allClassroomInfo from \"@/assets/classroom-info.json\"; // 全部的教室資訊\n  import { getIsSave, addSave, removeSave } from '@/api/save';\n\n  export default{\n    props: [\n      \"classroomID\"\n    ],\n    data(){\n      return {\n        isSave: false // cilent端的\"教室是否被收藏\"\n      }\n    },\n    async created(){\n      this.isSave = await getIsSave(this.classroomID); // 頁面載入時,更新cilent端的\"教室是否被收藏\"\n    },\n    methods: {\n      async clickSaveButton(){ // 更新user的\"教室是否被收藏\"\n        if (!(this.classroomID in allClassroomInfo)) return; // 如果教室資料不存在,無法更新\n        \n        this.isSave = !this.isSave;\n        if (this.isSave) addSave(this.classroomID);\n        else removeSave(this.classroomID);\n      }\n    },\n    watch: {\n      async classroomID(){ // 教室id改變時,更新cilent端的\"教室是否被收藏\"\n        this.isSave = await getIsSave(this.classroomID);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .saveButton{\n    margin: -5.5px 0 0 6px;\n    border: none;\n    color: #fff; font-size: 20px;\n    -webkit-text-stroke: 1px #666;\n  }\n  .saveButton-saved{\n    margin: -5.5px 0 0 6px;\n    border: none;\n    color: #f80; font-size: 20px;\n    -webkit-text-stroke: 1px;\n  }\n</style>\n<style>\n  .saveButton-tdFix{ /* bad solution */\n    padding-bottom: 0 !important;\n    display: flex;\n  }\n</style>","import { render } from \"./SaveButton.vue?vue&type=template&id=41dc2018&scoped=true\"\nimport script from \"./SaveButton.vue?vue&type=script&lang=js\"\nexport * from \"./SaveButton.vue?vue&type=script&lang=js\"\n\nimport \"./SaveButton.vue?vue&type=style&index=0&id=41dc2018&scoped=true&lang=css\"\nimport \"./SaveButton.vue?vue&type=style&index=1&id=41dc2018&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41dc2018\"]])\n\nexport default __exports__"],"names":["async","getUserPeriodData","account","localStorage","getItem","response","fetch","method","headers","credentials","body","JSON","stringify","userAccount","ok","Error","data","json","dataArray","Object","values","updatedData","Promise","all","map","startTotalMinutes","getMinutesFromTimeString","item","period","startPeriod","endTotalMinutes","endPeriod","n1","Math","ceil","n2","day","Date","n3","getDay","newPeriod","console","log","error","getAllUserPeriodData","timeString","date","hours","getUTCHours","minutes","getUTCMinutes","getEnablePeriodData","classroomID","setEnablePeriod","enablePeriod","apiUrl","status","getAllEnablePeriodData","convertToTimeString","baseDate","startDateTime","setDate","getDate","setUTCHours","setUTCMinutes","endDateTime","toJSON","sendApply","selectedPeriod","result","parse","code","cancelApply","pid","message","deletePeriodData","LendKey","ReceiveKey","acceptRequest","rejectRequest","getAllUserPoint","getUserPoint","setUserPoint","point","setUserBanState","state","getIsSave","toString","addSave","removeSave","getAllSave","arr","key","push","getClassroomInfo","classroom_default","building","name","number","equipment","classroom","classroomInfo","id","_createElementBlock","class","_normalizeClass","$data","isSave","onClick","_cache","args","$options","clickSaveButton","props","created","this","methods","allClassroomInfo","watch","__exports__","render"],"sourceRoot":""}